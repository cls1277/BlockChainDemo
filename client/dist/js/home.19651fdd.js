(function(){"use strict";var t={3044:function(t,e,o){var s=o(2281),n=o(9359),r=o.n(n),i=o(6742),a=o(4148),l=o.n(a),u=o(7822);s["default"].use(u.Z);const m=[{path:"/home",name:"home",component:()=>Promise.resolve().then(o.bind(o,6742)),props:!0}],c=new u.Z({mode:"history",base:"/home",routes:m});var f=c;l().defaults.baseURL="http://localhost:8080/",s["default"].prototype.$http=l(),s["default"].use(r()),s["default"].config.productionTip=!1,new s["default"]({router:f,render:t=>t(i["default"])}).$mount("#app")},6742:function(t,e,o){o.r(e),o.d(e,{default:function(){return M}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("el-container",[e("el-aside",{attrs:{width:"250px"}},[e("Form",{attrs:{formdata:t.havemoney},on:{func:t.getForm}}),e("Push",{attrs:{username:t.username},on:{funcc:t.getVis}})],1),e("el-main",[e("div",{staticClass:"balance"},[e("div",{staticClass:"balancenum"},[e("p",{staticClass:"mybalance-style"},[t._v(t._s(t.balance))]),e("p",{staticStyle:{color:"#fff","font-size":"30px"}},[t._v("余额(￥)")])])]),t._l(t.blocks,(function(t){return e("Block",{attrs:{blockid:t.blockid,blocktime:t.blocktime,count:t.count,message:t.message,nowhash:t.nowhash,prehash:t.prehash,status:t.status,username:t.username}})})),e("Dialog",{attrs:{dialogVisible:t.dialogvis},on:{func1:t.getVis}})],2)],1)],1)},n=[],r=(o(4962),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"trans"}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"转账数目"}},[e("el-input",{model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}})],1),e("el-form-item",{attrs:{label:"使用资金"}},[e("el-select",{attrs:{placeholder:"选择资金"},model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}},t._l(t.formdata,(function(t){return e("el-option",{attrs:{value:t.blockid,label:t.label}})})),1)],1),e("el-form-item",{attrs:{label:"转账备注"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.msg,callback:function(e){t.$set(t.form,"msg",e)},expression:"form.msg"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定转账")])],1)],1)],1)}),i=[];o(2860).Base64,o(4257).sha256;var a={name:"Form",data(){return{form:{msg:"",money:0,username:"",senderaddress:"",receiveraddress:"",count:0,senderpublic:"",signature:""},publickey:"",privatekey:""}},props:{formdata:Array},methods:{onSubmit(){this.$emit("func",this.form)}}},l=a,u=o(2349),m=(0,u.Z)(l,r,i,!1,null,null,null),c=m.exports,f=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"trans"}},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"欢迎您，"}},[e("el-input",{attrs:{placeholder:t.username,disabled:!0}})],1),e("el-form-item",{attrs:{label:"充值金额"}},[e("el-input",{model:{value:t.form.money,callback:function(e){t.$set(t.form,"money",e)},expression:"form.money"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确认充值")])],1)],1)],1)},h=[],p={name:"Push",data(){return{form:{money:0},dialog:!0}},props:{username:String},methods:{onSubmit(){this.form.money<=0?this.$notify.error({title:"充值失败",message:"充值数目应大于零"}):this.$http({method:"post",url:"http://150.158.93.128:8080/payforit",data:{id:"0",amount:this.form.money.toString(),name:"账户充值"}}).then((t=>{const e=document.createElement("div");e.innerHTML=t.data,document.body.appendChild(e),document.forms[2].submit()}))}}},d=p,b=(0,u.Z)(d,f,h,!1,null,null,null),g=b.exports,v=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"block"}},[e("el-descriptions",{staticClass:"margin-top",attrs:{title:"",column:2,size:"medium",border:""}},[e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-finished"}),t._v("块号")]),e("span",[t._v(t._s(t.blockid))])],2),e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-date"}),t._v("时间")]),e("span",[t._v(t._s(t.blocktime))])],2),e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-edit"}),t._v("PreHash")]),e("span",[t._v(t._s(t.prehash))])],2),e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-edit-outline"}),t._v("NowHash")]),e("span",[t._v(t._s(t.nowhash))])],2),e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-user"}),t._v("用户")]),e("span",[t._v(t._s(t.username))])],2),e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-coin"}),t._v("数目")]),e("span",[t._v(t._s(t.count))])],2),e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-star-off"}),t._v("状态")]),e("span",[t._v(t._s(t.status))])],2),e("el-descriptions-item",[e("template",{slot:"label"},[e("i",{staticClass:"el-icon-more-outline"}),t._v("备注")]),e("span",[t._v(t._s(t.message))])],2)],1)],1)},y=[],k={name:"Block",props:{blockid:Number,blocktime:String,prehash:String,nowhash:String,username:String,count:Number,status:String,message:String}},_=k,$=(0,u.Z)(_,v,y,!1,null,null,null),w=$.exports,S=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("img",{staticClass:"tu",attrs:{src:"https://pic1.imgdb.cn/item/633af21b16f2c2beb17a4a65.png"}})])},C=[],x={name:"Dialog",data(){return{}},props:{dialogVisible:Boolean},methods:{handleClose(){this.dialogVisible=!1,this.$emit("func1",!1)}}},O=x,P=(0,u.Z)(O,S,C,!1,null,null,null),j=P.exports;function V(t){return!!document.cookie.match(t)}var Z=o(2299),F={name:"Home",components:{Form:c,Block:w,Push:g,Dialog:j},data(){return{balance:1277,username:"",password:"",blocks:[{blockid:100,blocktime:"error",prehash:"error",nowhash:"error",username:"error",count:1277,status:"UnSpent",message:"error"}],havemoney:[],form:{count:0,msg:"",money:0,username:"",kkey:"",predata:""},dialogvis:!1}},mounted:function(){this.username=this.$route.query.username;let t=V(this.username);if(0==t||""==this.username||null==this.username)return this.$notify.error({title:"登录失败",message:"请先登录"}),void this.$router.replace("/");console.log(this.username),this.$http({method:"post",url:"http://150.158.93.128:8080/getbanlance",data:{username:this.username,password:""}}).then((t=>{0!=t.data.length?(this.balance=t.data,this.$http({method:"post",url:"http://150.158.93.128:8080/getChain",data:{}}).then((t=>{this.blocks=t.data;for(let e of this.blocks){if(0==e.count||"UnSpent"!=e.status||e.username!=this.username)continue;let t=e;t.label="块号:"+t.blockid+",金额:￥"+t.count,this.havemoney.push(t)}}))):(this.$notify.error({title:"登录失败",message:"请先登录"}),console.log("error"))}))},methods:{getVis(t){console.log(t),this.dialogvis=t,console.log(this.dialogvis)},getForm(t){return console.log(t),this.form=t,0==this.form.count?(console.log("less than"),void this.$notify.error({title:"转账失败",message:"转账数目应大于零"})):this.form.count>this.blocks[this.form.money-1].count?(console.log("more than"),void this.$notify.error({title:"转账失败",message:"转账数目大于资金数目"})):(this.form.username=this.username,void this.$http({method:"get",url:"http://150.158.93.128:8080/getallkey",params:{username:this.username}}).then((t=>{this.publickey=t.data.publickey,this.privatekey=t.data.privatekey;let e=Z.KZ.getKey(this.publickey),o=this.form.money+this.form.count+this.form.msg+this.form.username;this.form.predata=o,o=Z.fs.crypto.Cipher.encrypt(o,e),this.form.kkey=(0,Z.MS)(o),this.$http({method:"post",url:"http://150.158.93.128:8080/update",data:this.form}).then((t=>{0==t.data.length?this.$notify({title:"警告",message:"交易信息已被篡改，终止交易",type:"warning"}):(this.$notify({title:"转账成功",message:"转账成功",type:"success"}),this.$router.go())}))})))}}},T=F,B=(0,u.Z)(T,s,n,!1,null,null,null),M=B.exports}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,o),r.exports}o.m=t,function(){o.amdO={}}(),function(){var t=[];o.O=function(e,s,n,r){if(!s){var i=1/0;for(m=0;m<t.length;m++){s=t[m][0],n=t[m][1],r=t[m][2];for(var a=!0,l=0;l<s.length;l++)(!1&r||i>=r)&&Object.keys(o.O).every((function(t){return o.O[t](s[l])}))?s.splice(l--,1):(a=!1,r<i&&(i=r));if(a){t.splice(m--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var m=t.length;m>0&&t[m-1][2]>r;m--)t[m]=t[m-1];t[m]=[s,n,r]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={177:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,r,i=s[0],a=s[1],l=s[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(l)var m=l(o)}for(e&&e(s);u<i.length;u++)r=i[u],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(m)},s=self["webpackChunkpagestest"]=self["webpackChunkpagestest"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(3044)}));s=o.O(s)})();
//# sourceMappingURL=home.19651fdd.js.map